-- PUNTO 1
CREATE TABLESPACE VEHICLES_FLEET DATAFILE
'C:\oraclexe\app\oracle\oradata\XE\VEHICLES_FLEET1.DBF' SIZE 700M,
'C:\oraclexe\app\oracle\oradata\XE\VEHICLES_FLEET2.DBF' SIZE 300M;

CREATE TABLESPACE TEST_PURPOSES DATAFILE
'C:\oraclexe\app\oracle\oradata\XE\TEST_PURPOSES1.DBF' SIZE 500M;

-- PUNTO 2
CREATE UNDO TABLESPACE UNDO_TBS DATAFILE 
'C:\oraclexe\app\oracle\oradata\XE\UNDO_TBS1.DBF' SIZE 5M;

-- PUNTO 3
ALTER SYSTEM SET UNDO_TABLESPACE = UNDO_TBS;

-- PUNTO 4
CREATE USER NEW_DBA
IDENTIFIED BY DBA123
DEFAULT TABLESPACE VEHICLES_FLEET
QUOTA UNLIMITED ON VEHICLES_FLEET;

-- PUNTO 5
GRANT CONNECT, DBA TO NEW_DBA;

-- PUNTO 6
CREATE PROFILE MANAGER_PROFILE LIMIT
PASSWORD_LIFE_TIME 40
SESSIONS_PER_USER 1
IDLE_TIME 15
FAILED_LOGIN_ATTEMPTS 4;

CREATE PROFILE FINANCE_PROFILE LIMIT
PASSWORD_LIFE_TIME 15
SESSIONS_PER_USER 1
IDLE_TIME 5
FAILED_LOGIN_ATTEMPTS 2;

CREATE PROFILE SERVICE_PROFILE LIMIT
PASSWORD_LIFE_TIME 20
SESSIONS_PER_USER 1
IDLE_TIME 10
FAILED_LOGIN_ATTEMPTS 3;

CREATE PROFILE DEVELOPMENT LIMIT
PASSWORD_LIFE_TIME 100
SESSIONS_PER_USER 2
IDLE_TIME 30
FAILED_LOGIN_ATTEMPTS UNLIMITED;

-- PUNTO 7
CREATE ROLE WITHOUT_PRIVILEGES;
REVOKE ALL PRIVILEGES FROM WITHOUT_PRIVILEGES;

-- PUNTO 8
CREATE USER USER_ONE
IDENTIFIED BY USER1
DEFAULT TABLESPACE VEHICLES_FLEET
PROFILE MANAGER_PROFILE;

CREATE USER USER_TWO
IDENTIFIED BY USER2
DEFAULT TABLESPACE VEHICLES_FLEET
PROFILE FINANCE_PROFILE;

CREATE USER USER_TREE
IDENTIFIED BY USER3
DEFAULT TABLESPACE VEHICLES_FLEET
PROFILE SERVICE_PROFILE;

CREATE USER USER_FOUR
IDENTIFIED BY USER4
DEFAULT TABLESPACE VEHICLES_FLEET
PROFILE DEVELOPMENT;

GRANT CONNECT TO USER_ONE, USER_TWO, USER_TREE, USER_FOUR;

GRANT WITHOUT_PRIVILEGES TO USER_ONE, USER_TWO, USER_TREE;

-- PUNTO 9
ALTER USER USER_ONE ACCOUNT LOCK;
ALTER USER USER_TWO ACCOUNT LOCK;
ALTER USER USER_TREE ACCOUNT LOCK;

-- PUNTO 10
DROP TABLESPACE TEST_PURPOSES;
